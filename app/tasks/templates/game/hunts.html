{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="hunts-page">
    <div class="hunts-header">
        <h1 class="hunts-title">üèπ Ca√ßadas</h1>
        <p class="hunts-subtitle">Enfrente criaturas poderosas e ganhe recompensas √©picas</p>
    </div>

    {% if request.session.alert %}
    <div class="hunt-alert">
        <div class="alert-icon">‚ö†Ô∏è</div>
        <div class="alert-content">
            <div class="alert-title">Aviso</div>
            <div class="alert-message">{{ request.session.alert }}</div>
        </div>
    </div>
    {% endif %}

    <div class="hunts-container">
        <div class="hunts-grid">
            {% for hunt in hunts %}
            <div class="hunt-card {% if character.level >= hunt.required_level %}hunt-available{% else %}hunt-locked{% endif %}">
                <div class="hunt-card-header">
                    <div class="hunt-icon">
                        {% if character.level >= hunt.required_level %}üèπ{% else %}üîí{% endif %}
                    </div>
                    <div class="hunt-title">
                        <h3>{{ hunt.name }}</h3>
                        <div class="hunt-level-requirement">
                            <span class="requirement-label">N√≠vel necess√°rio:</span>
                            <span class="requirement-value {% if character.level >= hunt.required_level %}requirement-met{% else %}requirement-failed{% endif %}">
                                {{ hunt.required_level }}
                            </span>
                        </div>
                    </div>
                </div>

                <div class="hunt-card-body">
                    <div class="hunt-info-grid">
                        <div class="hunt-info-item">
                            <div class="info-icon">‚è±Ô∏è</div>
                            <div class="info-content">
                                <div class="info-label">Dura√ß√£o</div>
                                <div class="info-value">{{ hunt.duration }} minutos</div>
                            </div>
                        </div>
                        
                        <div class="hunt-info-item">
                            <div class="info-icon">üéØ</div>
                            <div class="info-content">
                                <div class="info-label">Dificuldade</div>
                                <div class="info-value">
                                    {% if hunt.difficulty == 1 %}F√°cil{% endif %}
                                    {% if hunt.difficulty == 2 %}M√©dia{% endif %}
                                    {% if hunt.difficulty == 3 %}Dif√≠cil{% endif %}
                                    {% if hunt.difficulty == 4 %}√âpica{% endif %}
                                    {% if hunt.difficulty == 5 %}Lend√°ria{% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="hunt-info-item">
                            <div class="info-icon">‚≠ê</div>
                            <div class="info-content">
                                <div class="info-label">Experi√™ncia</div>
                                <div class="info-value">+{{ hunt.xp_reward }} XP</div>
                            </div>
                        </div>
                        
                        <div class="hunt-info-item">
                            <div class="info-icon">üí∞</div>
                            <div class="info-content">
                                <div class="info-label">Recompensa</div>
                                <div class="info-value">{{ hunt.gold_reward }} Ouro</div>
                            </div>
                        </div>
                    </div>

                    <div class="hunt-monsters-section">
                        <h4 class="section-title">ü¶¥ Monstros Poss√≠veis</h4>
                        <div class="monsters-grid">
                            {% for hm in hunt.monsters.all %}
                            <div class="monster-tag" title="{{ hm.monster.name }} - N√≠vel {{ hm.monster.level }}">
                                <span class="monster-icon">üëπ</span>
                                <span class="monster-name">{{ hm.monster.name }}</span>
                                <span class="monster-level">Lv. {{ hm.monster.level }}</span>
                            </div>
                            {% empty %}
                            <div class="no-monsters">Nenhum monstro definido</div>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="hunt-description">
                        <p>{{ hunt.description|default:"Enfrente criaturas perigosas nesta ca√ßada." }}</p>
                    </div>
                </div>

                <div class="hunt-card-footer">
                    {% if character.level >= hunt.required_level %}
                    <a href="{% url 'start_hunt' hunt.id %}" class="hunt-btn hunt-btn-primary">
                        <span class="btn-icon">üèπ</span>
                        Iniciar Ca√ßada
                    </a>
                    {% else %}
                    <div class="hunt-blocked">
                        <div class="blocked-icon">üîí</div>
                        <div class="blocked-message">
                            <div class="blocked-title">Bloqueado</div>
                            <div class="blocked-desc">Alcance n√≠vel {{ hunt.required_level }} para desbloquear</div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <div class="no-hunts">
                <div class="no-hunts-icon">üèïÔ∏è</div>
                <div class="no-hunts-message">
                    <h3>Nenhuma Ca√ßada Dispon√≠vel</h3>
                    <p>Complete miss√µes para desbloquear novas ca√ßadas ou volte mais tarde.</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}