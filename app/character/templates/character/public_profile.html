{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/character_detail.css' %}">
{% endblock %}

{% block content %}
<div class="character-detail-page">
    <!-- CabeÃ§alho do personagem -->
    <div class="character-header-wrapper">
        <div class="character-header">
            <span class="character-emoji-header">{{ character.emoji }}</span>
            <h1 class="character-main-title">{{ character.name }}</h1>
            <div class="character-subtitle">
                <span class="character-level">â­ NÃ­vel {{ character.level }}</span>
            </div>
        </div>
    </div>

    <div class="character-divider"></div>

    <!-- SeÃ§Ã£o Principal - TrÃªs Colunas -->
    <div class="character-grid">
        <!-- Coluna 1: Atributos -->
        <div class="character-column">
            <div class="character-section character-attributes-section">
                <h2 class="character-section-title">ğŸ“Š Atributos</h2>
                <div class="attributes-list">
                    <div class="attribute-item attribute-strength">
                        <span class="attribute-emoji">ğŸ’ª</span>
                        <span class="attribute-name">ForÃ§a</span>
                        <span class="attribute-value">{{ character.final_attr.strength }}</span>
                    </div>
                    
                    <div class="attribute-item attribute-dexterity">
                        <span class="attribute-emoji">ğŸ¹</span>
                        <span class="attribute-name">Destreza</span>
                        <span class="attribute-value">{{ character.final_attr.dexterity }}</span>
                    </div>
                    
                    <div class="attribute-item attribute-arcane">
                        <span class="attribute-emoji">ğŸ”®</span>
                        <span class="attribute-name">Arcano</span>
                        <span class="attribute-value">{{ character.final_attr.arcane }}</span>
                    </div>
                    
                    <div class="attribute-item attribute-constitution">
                        <span class="attribute-emoji">â¤ï¸</span>
                        <span class="attribute-name">ConstituiÃ§Ã£o</span>
                        <span class="attribute-value">{{ character.final_attr.constitution }}</span>
                    </div>
                    
                    <div class="attribute-item attribute-courage">
                        <span class="attribute-emoji">ğŸ›¡ï¸</span>
                        <span class="attribute-name">Coragem</span>
                        <span class="attribute-value">{{ character.final_attr.courage }}</span>
                    </div>
                    
                    <div class="attribute-item attribute-luck">
                        <span class="attribute-emoji">ğŸ€</span>
                        <span class="attribute-name">Sorte</span>
                        <span class="attribute-value">{{ character.final_attr.luck }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coluna 2: Equipamentos -->
        <div class="character-column">
            <div class="character-section character-equipment-section">
                <h2 class="character-section-title">ğŸ›¡ï¸ Equipamentos</h2>
                <div class="equipment-layout-compact">
                    <div class="equipment-row">
                        <div class="equipment-slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Elmo" slot_icon="â›‘ï¸" slot_equipment=character.equipped_head %}
                        </div>
                    </div>
                    
                    <div class="equipment-row">
                        <div class="equipment-slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Colar" slot_icon="ğŸ“¿" slot_equipment=character.equipped_necklace %}
                        </div>
                        <div class="equipment-slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Ombro" slot_icon="ğŸ”°" slot_equipment=character.equipped_shoulders %}
                        </div>
                    </div>
                    
                    <div class="equipment-row">
                        <div class="equipment-slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Peito" slot_icon="ğŸ‘•" slot_equipment=character.equipped_chest %}
                        </div>
                        <div class="equipment-slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="MÃ£os" slot_icon="ğŸ§¤" slot_equipment=character.equipped_hands %}
                        </div>
                        <div class="equipment-slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="PÃ©s" slot_icon="ğŸ‘¢" slot_equipment=character.equipped_feet %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coluna 3: PerÃ­cias -->
        <div class="character-column">
            <div class="character-section character-skills-section">
                <h2 class="character-section-title">âš’ï¸ PerÃ­cias</h2>
                
                {% if professions %}
                    <div class="skills-list">
                        {% for p in professions %}
                            <div class="skill-item">
                                <span class="skill-emoji">{{ p.profession_type.emoji|default:"âš’ï¸" }}</span>
                                <span class="skill-name">{{ p.profession_type.name }}</span>
                                <span class="skill-level">Nv. {{ p.level }}</span>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="character-no-skills">
                        <span class="no-skills-emoji">ğŸ”</span>
                        <p class="no-skills-text">Nenhuma perÃ­cia aprendida ainda.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
    // Character Detail Page Animations
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar tooltips do Bootstrap se estiver disponÃ­vel
    if (typeof bootstrap !== 'undefined') {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    }

    // AnimaÃ§Ã£o de entrada para os atributos
    const attributeItems = document.querySelectorAll('.attribute-item');
    attributeItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateX(-20px)';
        
        setTimeout(() => {
            item.style.transition = 'all 0.5s ease';
            item.style.opacity = '1';
            item.style.transform = 'translateX(0)';
        }, index * 80);
    });

    // AnimaÃ§Ã£o de entrada para as perÃ­cias
    const skillItems = document.querySelectorAll('.skill-item');
    skillItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateX(20px)';
        
        setTimeout(() => {
            item.style.transition = 'all 0.5s ease';
            item.style.opacity = '1';
            item.style.transform = 'translateX(0)';
        }, index * 80);
    });

    // AnimaÃ§Ã£o para os slots de equipamento
    const equipmentSlots = document.querySelectorAll('.equipment-slot');
    equipmentSlots.forEach((slot, index) => {
        slot.style.opacity = '0';
        slot.style.transform = 'scale(0.8) rotate(5deg)';
        
        setTimeout(() => {
            slot.style.transition = 'all 0.4s ease';
            slot.style.opacity = '1';
            slot.style.transform = 'scale(1) rotate(0)';
        }, 300 + (index * 100));
    });

    // Efeito de brilho para slots com equipamento raro
    equipmentSlots.forEach(slot => {
        if (slot.classList.contains('rare') || slot.classList.contains('epic') || slot.classList.contains('legendary')) {
            setInterval(() => {
                slot.style.boxShadow = slot.style.boxShadow ? 
                    '' : '0 0 20px rgba(231, 201, 143, 0.5)';
            }, 1500);
        }
    });

    // Efeito de hover para atributos com valores altos
    attributeItems.forEach(item => {
        const valueElement = item.querySelector('.attribute-value');
        if (valueElement) {
            const value = parseInt(valueElement.textContent);
            if (value >= 15) {
                item.addEventListener('mouseenter', () => {
                    valueElement.style.background = 'linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 107, 107, 0.3))';
                    valueElement.style.transform = 'scale(1.1)';
                });
                
                item.addEventListener('mouseleave', () => {
                    valueElement.style.background = 'linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(78, 205, 196, 0.2))';
                    valueElement.style.transform = 'scale(1)';
                });
            }
        }
    });
});
</script>

{% endblock %}
