{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="scroll-container p-4 p-md-5 mt-4">
    <!-- Cabe√ßalho do personagem -->
    <div class="text-center mb-4">
        <div class="character-header">
            <span class="character-emoji-header">{{ character.emoji }}</span>
            <h1 class="char-detail-title">{{ character.name }}</h1>
            <div class="character-subtitle">
                <span class="character-level">‚≠ê N√≠vel {{ character.level }}</span>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- Se√ß√£o Principal - Tr√™s Colunas -->
    <div class="row mt-4">
        <!-- Coluna 1: Atributos -->
        <div class="col-md-4 mb-4">
            <div class="attributes-section p-3">
                <h2 class="char-detail-title text-center mb-3">üìä Atributos</h2>
                <div class="attributes-list">
                    <div class="attribute-item strength">
                        <span class="attribute-emoji">üí™</span>
                        <span class="attribute-name">For√ßa</span>
                        <span class="attribute-value">{{ character.final_attr.strength }}</span>
                    </div>
                    
                    <div class="attribute-item dexterity">
                        <span class="attribute-emoji">üèπ</span>
                        <span class="attribute-name">Destreza</span>
                        <span class="attribute-value">{{ character.final_attr.dexterity }}</span>
                    </div>
                    
                    <div class="attribute-item arcane">
                        <span class="attribute-emoji">üîÆ</span>
                        <span class="attribute-name">Arcano</span>
                        <span class="attribute-value">{{ character.final_attr.arcane }}</span>
                    </div>
                    
                    <div class="attribute-item constitution">
                        <span class="attribute-emoji">‚ù§Ô∏è</span>
                        <span class="attribute-name">Constitui√ß√£o</span>
                        <span class="attribute-value">{{ character.final_attr.constitution }}</span>
                    </div>
                    
                    <div class="attribute-item courage">
                        <span class="attribute-emoji">üõ°Ô∏è</span>
                        <span class="attribute-name">Coragem</span>
                        <span class="attribute-value">{{ character.final_attr.courage }}</span>
                    </div>
                    
                    <div class="attribute-item luck">
                        <span class="attribute-emoji">üçÄ</span>
                        <span class="attribute-name">Sorte</span>
                        <span class="attribute-value">{{ character.final_attr.luck }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coluna 2: Equipamentos -->
        <div class="col-md-4 mb-4">
            <div class="equipment-section p-3">
                <h2 class="char-detail-title text-center mb-3">üõ°Ô∏è Equipamentos</h2>
                <div class="equipment-layout-compact">
                    <div class="equipment-row">
                        <div class="slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Elmo" slot_icon="‚õëÔ∏è" slot_equipment=character.equipped_head %}
                        </div>
                    </div>
                    
                    <div class="equipment-row">
                        <div class="slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Colar" slot_icon="üìø" slot_equipment=character.equipped_necklace %}
                        </div>
                        <div class="slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Ombreiras" slot_icon="üî∞" slot_equipment=character.equipped_shoulders %}
                        </div>
                    </div>
                    
                    <div class="equipment-row">
                        <div class="slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="Peito" slot_icon="üëï" slot_equipment=character.equipped_chest %}
                        </div>
                        <div class="slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="M√£os" slot_icon="üß§" slot_equipment=character.equipped_hands %}
                        </div>
                        <div class="slot-container">
                            {% include "items/_equipment_slot.html" with slot_name="P√©s" slot_icon="üë¢" slot_equipment=character.equipped_feet %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coluna 3: Per√≠cias -->
        <div class="col-md-4 mb-4">
            <div class="skills-section p-3">
                <h2 class="char-detail-title text-center mb-3">‚öíÔ∏è Per√≠cias</h2>
                
                {% if professions %}
                    <div class="skills-list">
                        {% for p in professions %}
                            <div class="skill-item">
                                <span class="skill-emoji">{{ p.profession_type.emoji|default:"‚öíÔ∏è" }}</span>
                                <span class="skill-name">{{ p.profession_type.name }}</span>
                                <span class="skill-level">Nv. {{ p.level }}</span>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="no-skills">
                        <span class="no-skills-emoji">üîç</span>
                        <p class="no-skills-text">Nenhuma per√≠cia aprendida ainda.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    /* Estilos espec√≠ficos para a p√°gina de perfil */
    .character-header {
        background: linear-gradient(135deg, rgba(139, 69, 19, 0.2), rgba(212, 175, 55, 0.1));
        border-radius: 15px;
        padding: 2rem;
        border: 2px solid #8B4513;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .character-emoji-header {
        font-size: 4rem;
        display: block;
        margin-bottom: 1rem;
        animation: float 3s infinite ease-in-out;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    .character-subtitle {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 1rem;
    }

    .character-level, .character-class {
        background: rgba(139, 69, 19, 0.2);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        border: 1px solid #8B4513;
        font-family: 'Cinzel', serif;
        font-weight: bold;
        color: #3E2723;
    }

    /* Layout de Tr√™s Colunas */
    .attributes-section, .equipment-section, .skills-section {
        background: rgba(139, 69, 19, 0.1);
        border-radius: 10px;
        border: 2px solid #8B4513;
        height: 100%;
    }

    /* Lista de Atributos */
    .attributes-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .attribute-item {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.7rem;
        background: rgba(245, 245, 220, 0.3);
        border: 1px solid #8B4513;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .attribute-item:hover {
        background: rgba(245, 245, 220, 0.5);
        transform: translateX(3px);
    }

    .attribute-item.strength { border-left: 4px solid #DC143C; }
    .attribute-item.dexterity { border-left: 4px solid #32CD32; }
    .attribute-item.arcane { border-left: 4px solid #8A2BE2; }
    .attribute-item.constitution { border-left: 4px solid #FF6347; }
    .attribute-item.courage { border-left: 4px solid #1E90FF; }
    .attribute-item.luck { border-left: 4px solid #FFD700; }

    .attribute-emoji {
        font-size: 1.3rem;
        width: 25px;
        text-align: center;
    }

    .attribute-name {
        flex-grow: 1;
        font-family: 'MedievalSharp', cursive;
        color: #3E2723;
        font-weight: bold;
        font-size: 0.9rem;
    }

    .attribute-value {
        background: rgba(139, 69, 19, 0.2);
        color: #8B4513;
        padding: 0.3rem 0.6rem;
        border-radius: 8px;
        font-family: 'Cinzel', serif;
        font-weight: bold;
        font-size: 0.9rem;
        border: 1px solid #8B4513;
        min-width: 40px;
        text-align: center;
    }

    /* Equipamentos Compactos */
    .equipment-layout-compact {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }

    .equipment-row {
        display: flex;
        justify-content: center;
        gap: 0.8rem;
    }

    .slot-container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* Ajustes para os slots de equipamento na coluna compacta */
    .equipment-section .equipment-slot {
        width: 50px;
        height: 50px;
    }

    .equipment-section .slot-icon {
        font-size: 1.3rem;
        margin-bottom: 2px;
    }

    .equipment-section .slot-label {
        font-size: 0.55rem;
        bottom: 2px;
    }

    .equipment-section .item-tooltip {
        width: 200px;
        font-size: 0.7rem;
    }

    /* Lista de Per√≠cias */
    .skills-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .skill-item {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.7rem;
        background: rgba(245, 245, 220, 0.3);
        border: 1px solid #8B4513;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .skill-item:hover {
        background: rgba(245, 245, 220, 0.5);
        transform: translateX(3px);
    }

    .skill-emoji {
        font-size: 1.3rem;
        width: 25px;
        text-align: center;
    }

    .skill-name {
        flex-grow: 1;
        font-family: 'MedievalSharp', cursive;
        color: #3E2723;
        font-weight: bold;
        font-size: 0.9rem;
    }

    .skill-level {
        background: linear-gradient(135deg, #D4AF37, #B8860B);
        color: #3E2723;
        padding: 0.3rem 0.6rem;
        border-radius: 8px;
        font-family: 'Cinzel', serif;
        font-weight: bold;
        font-size: 0.8rem;
        border: 1px solid #8B4513;
        min-width: 50px;
        text-align: center;
    }

    /* Estados Vazios */
    .no-skills {
        text-align: center;
        padding: 2rem 1rem;
        background: rgba(139, 69, 19, 0.1);
        border: 2px dashed #8B4513;
        border-radius: 8px;
    }

    .no-skills-emoji {
        font-size: 2rem;
        display: block;
        margin-bottom: 0.5rem;
        opacity: 0.7;
    }

    .no-skills-text {
        font-family: 'Cinzel', serif;
        color: #3E2723;
        font-size: 0.9rem;
        margin: 0;
        font-style: italic;
    }

    /* Melhorias para textos */
    .char-detail-title {
        font-family: 'Cinzel', serif;
        color: #3E2723;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .divider {
        height: 2px;
        background: linear-gradient(to right, transparent, #8B4513, transparent);
        margin: 2rem 0;
    }

    /* Responsividade */
    @media (max-width: 768px) {
        .row {
            flex-direction: column;
        }
        
        .attributes-section, .equipment-section, .skills-section {
            margin-bottom: 1rem;
        }
        
        .equipment-row {
            gap: 0.5rem;
        }
        
        .attribute-item, .skill-item {
            padding: 0.6rem;
            gap: 0.6rem;
        }
        
        .attribute-emoji, .skill-emoji {
            font-size: 1.1rem;
            width: 20px;
        }
        
        .attribute-name, .skill-name {
            font-size: 0.8rem;
        }
        
        .attribute-value, .skill-level {
            font-size: 0.8rem;
            padding: 0.2rem 0.4rem;
            min-width: 35px;
        }
        
        .character-subtitle {
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .character-emoji-header {
            font-size: 3rem;
        }
    }

    @media (max-width: 480px) {
        .equipment-section .equipment-slot {
            width: 45px;
            height: 45px;
        }
        
        .equipment-section .slot-icon {
            font-size: 1.1rem;
        }
        
        .equipment-section .slot-label {
            font-size: 0.5rem;
        }
        
        .no-skills {
            padding: 1.5rem 1rem;
        }
        
        .no-skills-emoji {
            font-size: 1.5rem;
        }
        
        .no-skills-text {
            font-size: 0.8rem;
        }
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar tooltips do Bootstrap
    if (typeof bootstrap !== 'undefined') {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    }

    // Anima√ß√£o de entrada para os itens
    const attributeItems = document.querySelectorAll('.attribute-item');
    attributeItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateX(-10px)';
        
        setTimeout(() => {
            item.style.transition = 'all 0.4s ease';
            item.style.opacity = '1';
            item.style.transform = 'translateX(0)';
        }, index * 80);
    });

    const skillItems = document.querySelectorAll('.skill-item');
    skillItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateX(10px)';
        
        setTimeout(() => {
            item.style.transition = 'all 0.4s ease';
            item.style.opacity = '1';
            item.style.transform = 'translateX(0)';
        }, index * 80);
    });

    // Anima√ß√£o para os slots de equipamento
    const equipmentSlots = document.querySelectorAll('.equipment-slot');
    equipmentSlots.forEach((slot, index) => {
        slot.style.opacity = '0';
        slot.style.transform = 'scale(0.8)';
        
        setTimeout(() => {
            slot.style.transition = 'all 0.4s ease';
            slot.style.opacity = '1';
            slot.style.transform = 'scale(1)';
        }, 300 + (index * 100));
    });

    // Efeito de brilho para slots com equipamento raro
    equipmentSlots.forEach(slot => {
        if (slot.classList.contains('rare') || slot.classList.contains('epic') || slot.classList.contains('legendary')) {
            setInterval(() => {
                slot.style.boxShadow = slot.style.boxShadow ? 
                    '' : '0 0 15px rgba(212, 175, 55, 0.5)';
            }, 1500);
        }
    });

    // Efeito de brilho para per√≠cias de n√≠vel alto
    skillItems.forEach(item => {
        const levelBadge = item.querySelector('.skill-level');
        if (levelBadge) {
            const level = parseInt(levelBadge.textContent.match(/\d+/)[0]);
            if (level >= 5) {
                setInterval(() => {
                    levelBadge.style.background = levelBadge.style.background === 'linear-gradient(135deg, rgb(255, 215, 0), rgb(184, 134, 11))' ? 
                        'linear-gradient(135deg, #D4AF37, #B8860B)' : 'linear-gradient(135deg, #FFD700, #B8860B)';
                }, 2000);
            }
        }
    });
});
</script>

{% endblock %}